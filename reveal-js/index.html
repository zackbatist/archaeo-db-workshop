<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
<section data-markdown>
<textarea data-template>
### Database Management Workshop
#### Designing & Implementing Relational Databases
---------
##### Archaeological Information Interest Group
##### Monday January 28
---
##### Zack Batist
</textarea>
</section>
<section>
<section data-markdown>
<textarea data-template>
# Section 1
----
### About this workshop
</textarea>
</section>
<section data-markdown>
<textarea data-template>
### About me
---
- PhD Student in the Faculty of Information
- Interested in how [information] infrastructures shape archaeological practices and data
- Interested in lithics
- Database Manager at Stelida Naxos Archaeological Project since 2016
- I like developing cool apps in R!

[link to FLIRT]

</textarea>
</section>
<section data-markdown>
<textarea data-template>
### About you
---
![frowny face](assets/backpacker.png)

</textarea>
</section>
</section>
<section>
<section data-markdown>
<textarea data-template>
# Section 2
---
## What is a database?
</p>
</textarea>
</section>
<section data-markdown>
<textarea data-template>
## What is a database?
---
"A database is an organized collection of data, generally stored and accessed electronically from a computer system." <a href="https://en.wikipedia.org/wiki/Database">Wikipedia:Database</a>
</textarea>
</section>
<section data-markdown>
### More specifically...
---
- The **database management system (DBMS)** is the software that interacts with end users, applications and the database itself to capture and analyze data

- The sum total of the database, the DBMS and the associated applications can be referred to as a ‘database system’

- Often the term ‘database’ is used to loosely refer to any of the DBMS, the database system or an application associated with the database
</textarea>
</section>
<section data-markdown>
<textarea data-template>
### DBMS
---
- **Data definition** – Creation, modification and removal of definitions that structure the data

- **Update** – Insertion, modification and deletion of actual data

- **Retrieval** – Providing information in a form directly usable for further processing by other applications

- **Administration** – Registering and monitoring users, enforcing data security, monitoring performance, maintaining data integrity
</textarea>
</section>
<section data-markdown>
<textarea data-template>
### Database schema
---
Overall architecture or structure of the database

---
There are a few models to choose from...

- **Relational** <<<<<<<<<<<<<<<<<<<<

- Graph / Network

- Hierarchical

- and more...
</textarea>
</section>
<section data-markdown>
<textarea data-template>
### Relational Databases
---
- Organizes data into tables of columns and rows, with a unique key identifying each row

  - Rows are also called records
  - Columns are also called variables or attributes
</textarea>
</section>
<section data-markdown>
<textarea data-template>
### Relational Databases
---
- Generally, each table represents one 'entity type'
  - i.e. contexts, artefacts, OSL samples, etc

- Rows represent instances of that type of entity
  - i.e. context 0321, AR009876, S112

- Columns represent values attributed to that instance
  - i.e. soil texture, date closed, raw material, weathering index, etc
</textarea>
</section>
<section data-markdown>
<textarea data-template>
### Data
---
- The contents of the database

- Must 'fit' the schema (overall architecture of the database)
  - e.g. you can't have a doorframe open up onto a window frame or a brick wall, for instance; it should open up to an accessible room or to the street, but only when it’s on the ground floor in the latter case
</textarea>
</section>
</section>

<section>
<section data-markdown>
<textarea data-template>
# Section 3
---
## Setting up our DBMS
</textarea>
</section>

<section data-markdown>
<textarea data-template>
### Comparison of some DBMS
---
| DBMS | Main Aspects |
| - | - |
| **MariaDB/MySQL** | multi-user, open source, must build your own UI |
| **Access/FileMaker** | single-user, integrated UI, proprietary, single-platform |
| **SQLite** | single-user, open source |
| **Postgres** | emphasis on standards compliance, data preservation |
| **Neo4j** | graph database, open source |

</textarea>
</section>

<section data-markdown>
<textarea data-template>
### MariaDB Server setup
---
- Database on a *server*, accessible by multiple *clients*

- Data is centralized, unified and consistent

- In this case...
  - hosted on a cloud platform [DigitalOcean]
  - free with an educational discount
  - physically situated in St. Lawrence Market
</textarea>
</section>

<section data-markdown>
<textarea data-template>
[image of the stack]
</textarea>
</section>

<section data-markdown>
<textarea data-template>
## Using the command line ~ *Don't panic!*

Every action you make can be expressed as a text-based command inputted into the command line

---------------
_**It's like getting access to the breakfast buffet instead of ordering off the fixed menu!**_

---------------
Every action is intentional, direct and self-contained

</textarea>
</section>

<section data-markdown>
<textarea data-template>
### Bash
---

[example and breakdown of a bash command]

- Command
- Flags
- Values
- Directories and files
</textarea>
</section>

<section data-markdown>
<textarea data-template>
### Bash
---
#### Common symbols and conventions
- avoid spaces in file names

- capitalization matters

- 'up' key cycles through your most recent command

- .. is like going up one directory

- ~ is home directory

- `*` is wild card
</textarea>
</section>

<section data-markdown>
<textarea data-template>
### SQL
---
- Self-contained logical statements that include all parameters needed to do a particular action

- Semicolons [;] indicate the end of a command

- If something doesn’t add up, the terminal will spit out an error and nothing will happen

Example:
```
SELECT column1, column2, ...
FROM table_name; 
```

</textarea>
</section>

<section data-markdown>
<textarea data-template>
### Accessing our database server
---
1. Access the remote computer via SSH
```
ssh pi@<ip address>
```

2. Access the MariaDB database server
```
mysql -u MY_USERNAME -p
```

</textarea>
</section>

<section data-markdown>
<textarea data-template>
Using a graphical client
---

[screenshot of it all filled in]
</textarea>
</section>

<section data-markdown>
<textarea data-template>
### Creating a database on the server
---
```
CREATE DATABASE odate1;
```

### Creating users and setting permissions
```
CREATE USER 'lara'@'localhost' IDENTIFIED BY 'croft';
GRANT ALL PRIVILEGES ON odate1.*
TO 'lara'@'%' IDENTIFIED BY 'croft';
FLUSH PRIVILEGES;
```

</textarea>
</section>
</section>

<section>
<section data-markdown>
<textarea data-template>
# Section 4
---
## Structuring the database
</textarea>
</section>

<section data-markdown>
<textarea data-template>
## Scoping tables
---
- Each table represents one kind of entity

- Rows represent instances of the entity

- Each instance has the same kinds of attributes, but different variations thereof

- Columns are assigned a *data type*
</textarea>
</section>

<section data-markdown>
<textarea data-template>
### Data types
---
| **Data Type** | **Description** |
| -- | -- |
| VARCHAR | variable-length string |
| CHAR | fixed-length string |
| INT | integer |
| DEC | decimal number |
| TEXT | long string of text |
| BLOB | binary object |
| DATE/TIME/YEAR | date/time/year |

</textarea>
</section>

<section data-markdown>
<textarea data-template>
### Defining indexes
---
- Indexes indicate an independent variable or set of variables, in relation to their attributes

- Sometimes referred to as keys

- Can be set to require that each instance be unique

- Each table has a primary index, which must be unique

**Pro Tip:** Use *sequential integers* or *time stamps* to obtain unique values!

</textarea>
</section>

<section data-markdown>
<textarea data-template>
### Defining relationships
---
- Relationships indicate that the values in one index are equivalent to the values in another index

- Records must relate variables of the same data type
</textarea>
</section>

<section data-markdown>
<textarea data-template>
```
CREATE TABLE `odate1`.`contexts` (
`id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT,
`Context` VARCHAR(255) DEFAULT '',
`Trench` VARCHAR(255) DEFAULT '',
`ContextDescription` VARCHAR(255) DEFAULT '',
`Munsell` VARCHAR(255) DEFAULT '',
`SedimentColour` VARCHAR(255) DEFAULT '',
`NumberOfBuckets` INT(11) DEFAULT 0,
PRIMARY KEY (`id`)
);
```

```
CREATE INDEX index_name
ON table_name (column1, column2, ...); 
```
```
CREATE UNIQUE INDEX index_name
ON table_name (column1, column2, ...); 
```

```
ALTER TABLE `odate1`.`contexts`
ADD CONSTRAINT `FK_contexts_Trench`
FOREIGN KEY (`Trench`)
REFERENCES `odate1`.`contexts` (`Trench`)
ON DELETE CASCADE ON UPDATE CASCADE;
```


</textarea>
</section>
</section>

<section>
<section data-markdown>
<textarea data-template>
# Section 5
---
## Manipulating data
</textarea>
</section>

<section data-markdown>
<textarea data-template>
### Queries
---
Everything you do is expressed as a self-contained logical statement

There are a few fundamental commands:

#### INSERT
#### UPDATE
#### SELECT
#### DELETE
#### JOIN

</textarea>
</section>

<section data-markdown>
<textarea data-template>
### INSERT
---
Inserts records into a table

```
INSERT INTO `odate1`.`contexts` (Context, Trench, ContextDescription, Munsell, SedimentColour, NumberOfBuckets)
VALUES (0001, 001, "The first context of the season. Loamy sand, very herbaceous, characteristic of a typical surface layer.","5YR 3/3",NULL,3);
```

</textarea>
</section>

<section data-markdown>
<textarea data-template>
### UPDATE
---
Modifies cells within a table

```
UPDATE `odate1`.`contexts`
SET `SedimentColour` = "Dark Brown"
WHERE `Munsell` = "5YR 3/3";
```

</textarea>
</section>

<section data-markdown>
<textarea data-template>
### SELECT
---
Retrieves data from a table

```
SELECT `Context`, `Munsell`, `SedimentColour`
FROM `contexts`
WHERE `contexts`.`Trench` = 001;
```

</textarea>
</section>

<section data-markdown>
<textarea data-template>
### DELETE
---
Deletes a record

```
DELETE FROM `contexts`
WHERE `Context` = "0005";
```

</textarea>
</section>

<section data-markdown>
<textarea data-template>
### JOIN
---
Used as optional component of SELECT queries when you want to integrate data spanning multiple tables

There are four varieties of joins

[JOIN venn diagrams]

</textarea>
</section>

<section data-markdown>
<textarea data-template>
### [INNER] JOIN
---

```
SELECT Orders.OrderID, Customers.CustomerName, Orders.OrderDate
FROM Orders
INNER JOIN Customers ON Orders.CustomerID=Customers.CustomerID;
```
</textarea>
</section>

<section data-markdown>
<textarea data-template>

</textarea>
</section>

</section>

<section>
<section data-markdown>
<textarea data-template>
# Section 6
---
## Front-end development
</textarea>
</section>

<section data-markdown>
<textarea data-template>

</textarea>
</section>

<section data-markdown>
<textarea data-template>

</textarea>
</section>

<section data-markdown>
<textarea data-template>

</textarea>
</section>

<section data-markdown>
<textarea data-template>

</textarea>
</section>

<section data-markdown>
<textarea data-template>

</textarea>
</section>

<section data-markdown>
<textarea data-template>

</textarea>
</section>

</section>




			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
